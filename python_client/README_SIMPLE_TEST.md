# シンプルテスト実行ツール

自動評価を削除した、人間による目視確認のためのLangChainテスト実行システムです。

## 特徴

- ✅ **自動評価なし**: LangChainの柔軟な応答に対応
- 👁️ **人間による目視確認**: 結果を見て動作が正しいか判断
- 🎯 **クリーンな出力**: デバッグ情報なしで結果のみ表示
- 🎮 **柔軟な実行オプション**: 単一テスト、カテゴリ別、全件実行

## 使用方法

### 1. 前提条件
```bash
# Azure OpenAI APIキーを設定
export AZURE_OPENAI_API_KEY='your_api_key_here'

# C#サーバーを起動（別ターミナルで）
cd ../AzureOpenAI_Net481_FunctionCalling/AzureOpenAI_Net481_FunctionCalling/bin/Debug
./AzureOpenAI_Net481_FunctionCalling.exe
# プロンプトで '1' を選択（HTTPサーバーモード）
```

### 2. 基本的な使用方法

#### テスト一覧を表示
```bash
python3 simple_test_runner.py --list
```

#### 単一テストを実行
```bash
python3 simple_test_runner.py --test basic_001
```

#### カテゴリ別実行
```bash
python3 simple_test_runner.py --category basic
```

#### 全テスト実行
```bash
python3 simple_test_runner.py --all
```

#### インタラクティブモード（推奨）
```bash
python3 simple_test_runner.py --interactive
# または引数なしで実行
python3 simple_test_runner.py
```

## 利用可能なテストカテゴリ

| カテゴリ | 件数 | 説明 |
|---------|------|------|
| basic | 5件 | 基本的な単一関数呼び出し |
| intermediate | 5件 | 中級：複数ステップ、順次実行 |
| advanced | 5件 | 上級：複雑な数理解析、条件付き処理 |
| expert | 3件 | 専門家：アルゴリズム、数論、高度な分析 |
| japanese | 2件 | 日本語プロンプト |
| english | 2件 | 英語プロンプト |
| mixed_language | 1件 | 多言語混合 |
| edge_case | 3件 | エッジケース、境界条件 |
| large_number | 3件 | 大きな数値、スケール |
| multiple_operations | 1件 | 並列操作 |
| precision | 2件 | 精度確認 |

## 出力例

```
📋 テストID: basic_001
📂 カテゴリ: basic
🎯 複雑度: basic
🌐 言語: unknown
================================================================================
📝 プロンプト:
   234を素因数分解してください

💡 期待される動作（参考）:
   関数呼び出し: prime_factorization
   期待結果: [2, 3, 3, 13]

🚀 実行中...
----------------------------------------
⏱️  実行時間: 3.45秒

📄 実行結果:
================================================================================
234の素因数分解を行います。

prime_factorizationツールを使用して計算します。

234 = 2 × 3 × 3 × 13

つまり、234の素因数分解は [2, 3, 3, 13] です。
================================================================================
```

## 人間による評価のポイント

各テスト実行後、以下を確認してください：

1. **関数呼び出し**: 期待される関数が呼び出されているか
2. **計算結果**: 数学的に正しい結果が返されているか
3. **レスポンス品質**: 回答が適切で理解しやすいか
4. **エラーハンドリング**: エラーケースで適切に処理されているか

## ファイル構成

- `simple_test_runner.py`: メイン実行ツール
- `simple_test_utils.py`: シンプルなユーティリティ（評価機能なし）
- `test_data.py`: テストケース定義（既存）
- `langchain_client.py`: LangChainエージェント（既存）
- `csharp_tools.py`: C#関数通信ツール（既存）

## 利点

1. **柔軟性**: LLMの応答の多様性を受け入れ
2. **正確性**: 人間による正確な動作判断
3. **シンプル**: 複雑な自動評価ロジックを削除
4. **保守性**: システムが単純で理解しやすい

## 従来システムとの違い

| 項目 | 従来システム | 新シンプルシステム |
|------|-------------|-------------------|
| 評価方法 | 自動評価（パターンマッチング） | 人間による目視確認 |
| 出力 | 詳細デバッグ情報 | クリーンな結果のみ |
| 成否判定 | 厳密な期待値一致 | 人間による柔軟な判断 |
| 保守性 | 複雑（評価ロジック） | シンプル（実行のみ） |